<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  Copyright (c) 2010-2013 Qualcomm Technologies, Inc. All rights reserved. 
  Confidential and Proprietary - Qualcomm Technologies, Inc.
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 header.html - Header file used to customize the headers on each HTML page for the API 
               Interface Specification documents.
 Updated:  03/08/13 LB Updated to support Doxygen 1.8.3.1.
 Updated:  10/25/12 LB Added company name changes.
 New file: 10/15/12 LB Created to support Rev E Alpha process using Doxygen 1.8.2 -->
<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"></meta>
<meta http-equiv="X-UA-Compatible" content="IE=9"></meta>
<title>Multicore Asynchronous Runtime Environment Getting Started</title><!--END !PROJECT_NAME-->
<link href="tabs.css" rel="stylesheet" type="text/css"></link>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="autoEnterCurrentDate.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="is.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multicore Asynchronous Runtime Environment
   &#160;<span id="projectnumber">HT80-NG608-1 E</span>
   </div>
  </td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1-QCOM -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="revision_history.html"><span>Revision&#160;History</span></a></li>
      <li><a href="introduction.html"><span>Introduction</span></a></li>
      <li><a href="usergroup0.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="usergroup1.html"><span>User&#160;Guide</span></a></li>
      <li><a href="usergroup3.html"><span>Tutorials</span></a></li>
      <li><a href="usergroup4.html"><span>Reference&#160;Manual</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('getstarted.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Getting Started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="hello-world"></a>
Hello World!</h1>
<p>Let's explore a simple "Hello World!" example using MARE:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifdef HAVE_CONFIG_H</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &lt;config.h&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;mare/mare.h&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keywordtype">int</span> main() {</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  <span class="comment">// Initialize the MARE runtime.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  <a class="code" href="group__init__shutdown.html#gac85658f566f4b5b1f17b9d81fe14a508">mare::runtime::init</a>();</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  <span class="comment">// Create task that prints &quot;Hello &quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  <span class="keyword">auto</span> hello = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;      printf(<span class="stringliteral">&quot;Hello &quot;</span>);</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    });</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  <span class="comment">// Create task that prints &quot; World!&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  <span class="keyword">auto</span> world = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;      printf(<span class="stringliteral">&quot;World!\n&quot;</span>);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    });</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="comment">// Make sure that &quot;World!&quot; prints after &quot;Hello&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <a class="code" href="group__dependencies.html#gab0a753d6b37824e4b5349c411b155ca2">mare::after</a>(hello, world);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="comment">// Launch both tasks</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(hello);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(world);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="comment">// Wait for world to complete</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(world);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// Shutdown the MARE runtime.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="group__init__shutdown.html#ga9876b6a82a27555a8f3affe7f7aa8c4c">mare::runtime::shutdown</a>();</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
</div><!-- fragment --><p>In line 5, we include the <code><a class="el" href="mare_8h_source.html">mare.h</a></code> header, which is needed for any MARE program. All the MARE classes and functions are declared in the <code>mare</code> namespace.</p>
<p>Line 14 initializes the MARE runtime. There needs to be one invocation of <code><a class="el" href="group__init__shutdown.html#gac85658f566f4b5b1f17b9d81fe14a508">mare::runtime::init()</a></code> in the program, before any other MARE APIs are called. Repeated invocations of this function are allowed, however, they are not recommended. The function initializesall internal data structures, scheduler and starting of underlying threads. Pairwise with <code>init</code>, there is an equivalent <code><a class="el" href="group__init__shutdown.html#ga9876b6a82a27555a8f3affe7f7aa8c4c">mare::runtime::shutdown()</a></code> (line 37). Again, at least one invocation of shutdown is necessary to tear down the runtime.</p>
<p>In this example, we use <code>mare::create_task</code> to create two tasks, <code>hello</code> (line 17) and <code>world</code> (line 22). <code>create_task</code> takes as a parameter a <a href="http://www.cprogramming.com/c++11/c++11-lambda-closures.html">lambda</a> expression, really just an anonymous function, which defines the work that the tasks execute. In our case, <code>hello</code> prints "Hello" and <code>world</code> prints "World!".</p>
<p>When a new task is created, the programmer has a chance to set up dependencies with other tasks. In the example, we use <code>mare::after</code> to ensure that <code>world</code> is printed after <code>hello</code>. Without this dependency, the MARE runtime could execute <code>world</code> first, or concurrently. Once the dependency between the tasks is set up, we launch them in lines 30 and 31. Launching tells the MARE runtime that the tasks are ready for execution. Finally, in line 34, we wait for <code>world</code> to finish. We do not need to explicitly wait for <code>hello</code> because the MARE runtime ensures that <code>hello</code> executes before <code>world</code>.</p>
<p>This simple example illustrates two basic MARE abstractions: tasks and dependencies. In MARE, programmers think about algorithms in terms of concurrent tasks and let the MARE runtime schedule them onto available resources in the system. Programmers can create dynamic task graphs by setting dependencies between tasks that the runtime enforces. Another key MARE abstraction &mdash;not shown in the example&mdash; are groups. Groups allow the programmer to easily manage sets of tasks. In the example, we could have used a group to wait for both tasks.</p>
<h2><a class="anchor" id="standalone-compile"></a>
Compiling Hello World!</h2>
<p>To compile the above example, we can use a standalone <code>Makefile</code>:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor"># -*- Makefile -*-</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># Example standalone makefile for helloworld1</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;helloworld1_SOURCES = helloworld1.cc</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;helloworld1_OBJECTS = $(helloworld1_SOURCES:%.cc=%.o)</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;# Same value as provided to MARE <span class="keywordflow">for</span> the invocation of ./configure --prefix=...</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;MARE_PREFIX = /path/to/mare/dir</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;CXX      = g++ -std=gnu++0x -pthread</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;CPPFLAGS = -I$(MARE_PREFIX)/include</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;CXXFLAGS = -g -O2 -Wall -Wextra</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;LDFLAGS  = -L$(MARE_PREFIX)/lib</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;LIBS     = -lmare</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;all: helloworld1</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;helloworld1: $(helloworld1_OBJECTS)</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    $(CXX) $(CXXFLAGS) $(LDFLAGS) $^ $(LIBS) -o $@</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;.PHONY: clean</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;clean:</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    $(RM) $(helloworld1_OBJECTS) helloworld1</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;.DELETE_ON_ERROR:</div>
</div><!-- fragment --><p>Note that the C++ code needs to be compiled with support for at least GNU++0x extensions (option <code>-std=gnu++0x</code>), preferably C++11 (option <code>-std=c++11</code>). We also need to ensure that the MARE install path is properly set; otherwise this results in compilation and/or link errors.</p>
<p>We assume the current directory contains two files: </p>
<pre class="fragment">Makefile
helloworld1.cc
</pre><p>The example can then be built and run by typing the following at the command prompt: </p>
<pre class="fragment">$ make
$ ./helloworld1
Hello World!
</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  Copyright (c) 2012-2013 Qualcomm Technologies, Inc. All rights reserved. 
  Confidential and Proprietary - Qualcomm Technologies, Inc.
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 footer.html - footer file used to customize the footers on each HTML page for the API 
               Interface Specification documents.
 Updated:  11/05/13 LB Removed confidential, distribution, and export statement.
 Updated:  09/20/13 LB Updated to support mare project's User Guide and API doc.
 Updated:  04/18/13 LB Added Documentation and Interface Specification in place of hard-coding doc dcn. Deleted original
                       use of Documentation and Interface Specification to display text in the left portion of the footer.
 Updated:  03/08/13 LB Updated to support Doxygen 1.8.3.1
 Updated:  01/18/13 LB Replaced qualcomm_logo.gif to QTI_Logo.png
 Updated:  10/25/12 LB Added company name changes.
 New file: 10/15/12 LB Created to support the Rev E Alpha Doxygen-to-HTML-PDF process. -->
<!-- start footer part -->
<!-- 7/12/12 JG added div class defined in css to include warning statement on all pages -->
<!--[if lte IE 8]><div class="warningmsgie8"><![endif]-->
<!--[if(gte IE 9)|!(IE)]><!--><div class="warningmsg"><!--<![endif]-->
</div>
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
		<p align="right">HT80-NG608-1 E<br />
        <img class="footer"  alt="QTI Logo" src="qti_logo_HTML.png" />
		</p>
		</li>
  </ul>
</div>
</body>
</html>
