<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  Copyright (c) 2010-2013 Qualcomm Technologies, Inc. All rights reserved. 
  Confidential and Proprietary - Qualcomm Technologies, Inc.
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 header.html - Header file used to customize the headers on each HTML page for the API 
               Interface Specification documents.
 Updated:  03/08/13 LB Updated to support Doxygen 1.8.3.1.
 Updated:  10/25/12 LB Added company name changes.
 New file: 10/15/12 LB Created to support Rev E Alpha process using Doxygen 1.8.2 -->
<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"></meta>
<meta http-equiv="X-UA-Compatible" content="IE=9"></meta>
<title>Multicore Asynchronous Runtime Environment Buffers</title><!--END !PROJECT_NAME-->
<link href="tabs.css" rel="stylesheet" type="text/css"></link>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="autoEnterCurrentDate.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="is.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multicore Asynchronous Runtime Environment
   &#160;<span id="projectnumber">HT80-NG608-1 E</span>
   </div>
  </td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1-QCOM -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="revision_history.html"><span>Revision&#160;History</span></a></li>
      <li><a href="introduction.html"><span>Introduction</span></a></li>
      <li><a href="usergroup0.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="usergroup1.html"><span>User&#160;Guide</span></a></li>
      <li><a href="usergroup3.html"><span>Tutorials</span></a></li>
      <li><a href="usergroup4.html"><span>Reference&#160;Manual</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__buffers__doc.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Buffers<div class="ingroups"><a class="el" href="group__chapter__heterogeneous__compute__doc.html">Heterogeneous Compute API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:classmare_1_1buffer"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffers__doc.html#classmare_1_1buffer">mare::buffer&lt; ElementType &gt;</a></td></tr>
<tr class="separator:classmare_1_1buffer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacac9232d5b0d128d266ff75c8d420e30"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:gacac9232d5b0d128d266ff75c8d420e30"><td class="memTemplItemLeft" align="right" valign="top">buffer_ptr&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__buffers__doc.html#gacac9232d5b0d128d266ff75c8d420e30">mare::create_buffer</a> (size_t size)</td></tr>
<tr class="separator:gacac9232d5b0d128d266ff75c8d420e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab475ea76c287dd3c27c34cb85e8b6a29"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:gab475ea76c287dd3c27c34cb85e8b6a29"><td class="memTemplItemLeft" align="right" valign="top">buffer_ptr&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__buffers__doc.html#gab475ea76c287dd3c27c34cb85e8b6a29">mare::create_buffer</a> (T *ptr, size_t size)</td></tr>
<tr class="separator:gab475ea76c287dd3c27c34cb85e8b6a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Class Documentation</h2>
<a name="classmare_1_1buffer" id="classmare_1_1buffer"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">class mare::buffer</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><h3>template&lt;typename ElementType&gt;<br/>
class mare::buffer&lt; ElementType &gt;</h3>


<p>Definition at line <a class="el" href="buffer_8hh_source.html#l00026">26</a> of file <a class="el" href="buffer_8hh_source.html">buffer.hh</a>.</p>
</div><table class="memberdecls">
<tr><td colspan="2"><h3>Public member functions</h3></td></tr>
<tr class="memitem:a9f66cba14df85633b4b983d097485499"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f66cba14df85633b4b983d097485499"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffers__doc.html#a9f66cba14df85633b4b983d097485499">buffer</a> (ElementType *ptr, size_t sz)</td></tr>
<tr class="separator:a9f66cba14df85633b4b983d097485499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accb49975429b226f972fb94d1e9283fe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="accb49975429b226f972fb94d1e9283fe"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffers__doc.html#accb49975429b226f972fb94d1e9283fe">buffer</a> (size_t sz)</td></tr>
<tr class="separator:accb49975429b226f972fb94d1e9283fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18a54499f6644c94d78b02b35476df71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffers__doc.html#a18a54499f6644c94d78b02b35476df71">sync</a> ()</td></tr>
<tr class="separator:a18a54499f6644c94d78b02b35476df71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef061cc7c5b6ab884693097331a0e6d6"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffers__doc.html#aef061cc7c5b6ab884693097331a0e6d6">size</a> ()</td></tr>
<tr class="separator:aef061cc7c5b6ab884693097331a0e6d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01267e87492083dfef815fcfa89296b0"><td class="memItemLeft" align="right" valign="top">ElementType &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffers__doc.html#a01267e87492083dfef815fcfa89296b0">operator[]</a> (size_t <a class="el" href="group__ranges__doc.html#classmare_1_1index">index</a>)</td></tr>
<tr class="separator:a01267e87492083dfef815fcfa89296b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca866b51cecf91f7bd5e77fe75c74d4b"><td class="memItemLeft" align="right" valign="top">ElementType *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffers__doc.html#aca866b51cecf91f7bd5e77fe75c74d4b">data</a> ()</td></tr>
<tr class="separator:aca866b51cecf91f7bd5e77fe75c74d4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Member Function Documentation</h4>
<a class="anchor" id="a18a54499f6644c94d78b02b35476df71"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ElementType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__buffers__doc.html#classmare_1_1buffer">mare::buffer</a>&lt; ElementType &gt;::sync </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Copies the data back to backing store which can be either user provided or runtime allocated or it can be host-accessible device memory. If this method is called when the kernel is still running, then the calling thread is blocked until the kernel completes execution and data is copied back. </p>

<p>Definition at line <a class="el" href="buffer_8hh_source.html#l00040">40</a> of file <a class="el" href="buffer_8hh_source.html">buffer.hh</a>.</p>

</div>
</div>
<a class="anchor" id="aef061cc7c5b6ab884693097331a0e6d6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ElementType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="group__buffers__doc.html#classmare_1_1buffer">mare::buffer</a>&lt; ElementType &gt;::size </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the size in elements of the buffer. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns the size in elements of the buffer. </dd></dl>

</div>
</div>
<a class="anchor" id="a01267e87492083dfef815fcfa89296b0"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ElementType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">ElementType&amp; <a class="el" href="group__buffers__doc.html#classmare_1_1buffer">mare::buffer</a>&lt; ElementType &gt;::operator[] </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Access an element of buffer. If the buffer is used in a kernel launch, calling this function would block until the kernel completes and data is moved back to host backing store which can be either provided by the user during buffer creation or is created by MARE runtime or it simply refers to host-accessible device memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of the element to access. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the element stored at index. </dd></dl>

</div>
</div>
<a class="anchor" id="aca866b51cecf91f7bd5e77fe75c74d4b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ElementType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">ElementType* <a class="el" href="group__buffers__doc.html#classmare_1_1buffer">mare::buffer</a>&lt; ElementType &gt;::data </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns pointer to the host backing store. This is equivalent to calling operator[] with index equals 0. </p>

</div>
</div>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gacac9232d5b0d128d266ff75c8d420e30"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">buffer_ptr&lt;T&gt; mare::create_buffer </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a buffer of given size with no backing store on host. If this buffer is used on the host before being used on a device, host memory is allocated and used as the backing store, so in this case the buffer behaves as though it was created with user provided data. </p>
<dl class="section see"><dt>See Also</dt><dd>mare::create_buffer(T* ptr, size_t size).</dd></dl>
<p>If this buffer is used on a device and is never accessed on the host, no host memory will be allocated for the buffer. This may be useful in case of buffers used across consecutive kernel launches.</p>
<p>If this buffer is used on a device and then accessed on the host, then no new host memory will be allocated since the buffer may already be allocated in host-accessible device memory when used on the device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Size in number of elements of a given Type.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="group__exceptions.html#classmare_1_1api__exception">api_exception</a></td><td>if size is 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Create a buffer with 1k elements.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">auto</span> buf_a = mare::create_buffer&lt;float&gt;(1024);</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
</div><!-- fragment --></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>mare_buffer_ptr&lt;T&gt; &ndash; Buffer pointer that points to new buffer. </dd></dl>

<p>Definition at line <a class="el" href="buffer_8hh_source.html#l00091">91</a> of file <a class="el" href="buffer_8hh_source.html">buffer.hh</a>.</p>

</div>
</div>
<a class="anchor" id="gab475ea76c287dd3c27c34cb85e8b6a29"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">buffer_ptr&lt;T&gt; mare::create_buffer </td>
          <td>(</td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a buffer of size elements with data provided in ptr as the backing store. Modifying the contents using ptr after this call is undefined, since it will be used as a backing store for syncing data to and from the device where this buffer is used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>Pointer to host data to be used as backing store. </td></tr>
    <tr><td class="paramname">size</td><td>Size in number of elements, it's assumed that the application has allocated sz * sizeof(ElementType) bytes ptr is pointing to it.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="group__exceptions.html#classmare_1_1api__exception">api_exception</a></td><td>if size is 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="comment">// Use the aligned allocator to allocate host data</span></div>
<div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keywordtype">size_t</span> Alignment&gt;</div>
<div class="line"><span class="keyword">using</span> aligned_vector = std::vector&lt;T, mare::aligned_allocator&lt;T, Alignment&gt; &gt;;</div>
<div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><span class="keyword">using</span> page_aligned_vector = aligned_vector&lt;T, 4096&gt;;</div>
<div class="line"></div>
<div class="line"><span class="comment">// allocate host memory for 1k floats.</span></div>
<div class="line">page_aligned_vector&lt;float&gt; host_ptr(1024);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Create a buffer from existing host data</span></div>
<div class="line"><span class="keyword">auto</span> buf_a = <a class="code" href="group__buffers__doc.html#gacac9232d5b0d128d266ff75c8d420e30">mare::create_buffer</a>(host_ptr, 1024);</div>
<div class="line"></div>
</div><!-- fragment --></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>mare_buffer_ptr&lt;T&gt; &ndash; Buffer pointer that points to new buffer. </dd></dl>

<p>Definition at line <a class="el" href="buffer_8hh_source.html#l00134">134</a> of file <a class="el" href="buffer_8hh_source.html">buffer.hh</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  Copyright (c) 2012-2013 Qualcomm Technologies, Inc. All rights reserved. 
  Confidential and Proprietary - Qualcomm Technologies, Inc.
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 footer.html - footer file used to customize the footers on each HTML page for the API 
               Interface Specification documents.
 Updated:  11/05/13 LB Removed confidential, distribution, and export statement.
 Updated:  09/20/13 LB Updated to support mare project's User Guide and API doc.
 Updated:  04/18/13 LB Added Documentation and Interface Specification in place of hard-coding doc dcn. Deleted original
                       use of Documentation and Interface Specification to display text in the left portion of the footer.
 Updated:  03/08/13 LB Updated to support Doxygen 1.8.3.1
 Updated:  01/18/13 LB Replaced qualcomm_logo.gif to QTI_Logo.png
 Updated:  10/25/12 LB Added company name changes.
 New file: 10/15/12 LB Created to support the Rev E Alpha Doxygen-to-HTML-PDF process. -->
<!-- start footer part -->
<!-- 7/12/12 JG added div class defined in css to include warning statement on all pages -->
<!--[if lte IE 8]><div class="warningmsgie8"><![endif]-->
<!--[if(gte IE 9)|!(IE)]><!--><div class="warningmsg"><!--<![endif]-->
</div>
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
		<p align="right">HT80-NG608-1 E<br />
        <img class="footer"  alt="QTI Logo" src="qti_logo_HTML.png" />
		</p>
		</li>
  </ul>
</div>
</body>
</html>
