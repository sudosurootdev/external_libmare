<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  Copyright (c) 2010-2013 Qualcomm Technologies, Inc. All rights reserved. 
  Confidential and Proprietary - Qualcomm Technologies, Inc.
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 header.html - Header file used to customize the headers on each HTML page for the API 
               Interface Specification documents.
 Updated:  03/08/13 LB Updated to support Doxygen 1.8.3.1.
 Updated:  10/25/12 LB Added company name changes.
 New file: 10/15/12 LB Created to support Rev E Alpha process using Doxygen 1.8.2 -->
<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"></meta>
<meta http-equiv="X-UA-Compatible" content="IE=9"></meta>
<title>Multicore Asynchronous Runtime Environment Cancelation</title><!--END !PROJECT_NAME-->
<link href="tabs.css" rel="stylesheet" type="text/css"></link>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="autoEnterCurrentDate.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="is.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multicore Asynchronous Runtime Environment
   &#160;<span id="projectnumber">HT80-NG608-1 E</span>
   </div>
  </td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1-QCOM -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="revision_history.html"><span>Revision&#160;History</span></a></li>
      <li><a href="introduction.html"><span>Introduction</span></a></li>
      <li><a href="usergroup0.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="usergroup1.html"><span>User&#160;Guide</span></a></li>
      <li><a href="usergroup3.html"><span>Tutorials</span></a></li>
      <li><a href="usergroup4.html"><span>Reference&#160;Manual</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__tasks__cancelation.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Cancelation<div class="ingroups"><a class="el" href="group__chapter__tasks__doc.html">Tasks Reference API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga53177a2d3238bf2b1c0a39091fe2ad5d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tasks__cancelation.html#ga53177a2d3238bf2b1c0a39091fe2ad5d">mare::canceled</a> (task_ptr const &amp;task)</td></tr>
<tr class="separator:ga53177a2d3238bf2b1c0a39091fe2ad5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1020852759727d665fa68215def0e1a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tasks__cancelation.html#gad1020852759727d665fa68215def0e1a">mare::canceled</a> (unsafe_task_ptr const &amp;task)</td></tr>
<tr class="separator:gad1020852759727d665fa68215def0e1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26b8a9d6ac322a21cd5cef9c90d61e4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tasks__cancelation.html#ga26b8a9d6ac322a21cd5cef9c90d61e4c">mare::cancel</a> (task_ptr const &amp;task)</td></tr>
<tr class="separator:ga26b8a9d6ac322a21cd5cef9c90d61e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9eec14bf458dfc6322910b6d428221ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tasks__cancelation.html#ga9eec14bf458dfc6322910b6d428221ad">mare::cancel</a> (unsafe_task_ptr const &amp;task)</td></tr>
<tr class="separator:ga9eec14bf458dfc6322910b6d428221ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad97de382780eb082e5341a23cf45dec9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel</a> ()</td></tr>
<tr class="separator:gad97de382780eb082e5341a23cf45dec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ef5a64e289ff4f2339b846066d4a052"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tasks__cancelation.html#ga2ef5a64e289ff4f2339b846066d4a052">mare::abort_task</a> ()</td></tr>
<tr class="separator:ga2ef5a64e289ff4f2339b846066d4a052"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga53177a2d3238bf2b1c0a39091fe2ad5d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mare::canceled </td>
          <td>(</td>
          <td class="paramtype">task_ptr const &amp;&#160;</td>
          <td class="paramname"><em>task</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks whether a task is canceled.</p>
<p>Use the function to know whether a task is canceled. If the task was canceled &ndash; via cancelation propagation, mare::cancel(group_ptr const&amp;) or mare::cancel(task_ptr const&amp;) &ndash; before it started executing, mare::canceled(task_ptr const&amp;) returns true.</p>
<p>If the task was canceled &ndash; via mare::cancel(group_ptr const&amp;)or mare::cancel(group_ptr const&amp;) &ndash; while it was executing, then mare::canceled(task_ptr const&amp;) returns true only if the task is not executing any more and it exited via <a class="el" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel()</a> or <a class="el" href="group__tasks__cancelation.html#ga2ef5a64e289ff4f2339b846066d4a052">mare::abort_task()</a>.</p>
<p>Finally, if the task completed successfully, mare::canceled(<a class="el" href="group__tasks__doc.html#classmare_1_1task__ptr">task_ptr</a> const&amp;) always returns false.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Task pointer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE &ndash; The task has transitioned to a canceled state. <br/>
 FALSE &ndash; The task has not yet transitioned to a canceled state.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="group__exceptions.html#classmare_1_1api__exception">api_exception</a></td><td>If task pointer is NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example:</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">auto</span> t = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 1000; ++i) {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;      <a class="code" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel</a>();</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;      printf(<span class="stringliteral">&quot;Hello World!\n&quot;</span>);</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;      sleep(1); <span class="comment">//sleep for one second</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    }</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  };);</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">auto</span> g = <a class="code" href="group__groups__creation.html#ga164f9c8b577069b2d8b1634cde459b1e">mare::create_group</a>(<span class="stringliteral">&quot;example&quot;</span>);</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// It will never fire</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;assert(<a class="code" href="group__groups__cancel.html#ga36ac85ed1e789507e43f03eaab9a8841">mare::canceled</a>(t) == <span class="keyword">false</span>);</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// launch task</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(g, t);</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// It Will never fire</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;assert(<a class="code" href="group__groups__cancel.html#ga36ac85ed1e789507e43f03eaab9a8841">mare::canceled</a>(t) == <span class="keyword">false</span>);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Sleep for 10 seconds</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;sleep(10);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// It Will never fire</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;mare::assert(<a class="code" href="group__groups__cancel.html#ga36ac85ed1e789507e43f03eaab9a8841">canceled</a>(t) == <span class="keyword">false</span>);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// Cancel both the task and the group</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<a class="code" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel</a>(t);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<a class="code" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel</a>(g);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// It might fire if the task has not executed abort_on_cancel() yet</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;assert(<a class="code" href="group__groups__cancel.html#ga36ac85ed1e789507e43f03eaab9a8841">mare::canceled</a>(t) == <span class="keyword">true</span>);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// Wait for the task to transition to canceled state</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(t);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// It Will never fire</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;assert(<a class="code" href="group__groups__cancel.html#ga36ac85ed1e789507e43f03eaab9a8841">mare::canceled</a>(t) == <span class="keyword">true</span>);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
</div><!-- fragment --> </dd></dl>

<p>Definition at line <a class="el" href="task_8hh_source.html#l00102">102</a> of file <a class="el" href="task_8hh_source.html">task.hh</a>.</p>

</div>
</div>
<a class="anchor" id="gad1020852759727d665fa68215def0e1a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mare::canceled </td>
          <td>(</td>
          <td class="paramtype">unsafe_task_ptr const &amp;&#160;</td>
          <td class="paramname"><em>task</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks whether a task is canceled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Task pointer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE &ndash; The task has transitioned to a canceled state. <br/>
 FALSE &ndash; The task has not yet transitioned to a canceled state.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="group__exceptions.html#classmare_1_1api__exception">api_exception</a></td><td>If task pointer is NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd>mare::canceled(task_ptr const&amp; task) </dd></dl>

<p>Definition at line <a class="el" href="task_8hh_source.html#l00122">122</a> of file <a class="el" href="task_8hh_source.html">task.hh</a>.</p>

</div>
</div>
<a class="anchor" id="ga26b8a9d6ac322a21cd5cef9c90d61e4c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mare::cancel </td>
          <td>(</td>
          <td class="paramtype">task_ptr const &amp;&#160;</td>
          <td class="paramname"><em>task</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Cancels task.</p>
<p>Use <code><a class="el" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel()</a></code> to cancel a task and its successors. The effects of <code><a class="el" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel()</a></code> depend on the task status:</p>
<ul>
<li>If a task is canceled before it launches, it never executes &ndash; even if it is launched afterwards. In addition, it propagates the cancelation to the task's successors. This is called "cancelation propagation".</li>
</ul>
<ul>
<li>If a task is canceled after it is launched, but before it starts executing, it will never execute and it will propagate cancelation to its successors.</li>
</ul>
<ul>
<li>If the task is running when someone else calls <code><a class="el" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel()</a></code>, it is up to the task to ignore the cancelation request and continue its execution, or to honor the request via <code><a class="el" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel()</a></code>, which aborts the task's execution and propagates the cancelation to the task's successors.</li>
</ul>
<ul>
<li>Finally, if a task is canceled after it completes its execution (successfully or not), it does not change its status and it does not propagate cancelation.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Task to cancel.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="group__exceptions.html#classmare_1_1api__exception">api_exception</a></td><td>If task pointer is NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example 1: Canceling a task before launching it:</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">auto</span> t1 = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  });</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">auto</span> t2 = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  });</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Create dependencies</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;t1 &gt;&gt; t2;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// Cancel t1, which propagates cancelation to t2</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<a class="code" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel</a>(t1);</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// Launch t2. Does nothing, t2 got canceleded via cancelation propagation</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(t2);</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// Returns immediately, t2 is canceled.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(t2);</div>
</div><!-- fragment --></dd></dl>
<p>In the example above, we create two tasks <code>t1</code> and <code>t2</code> and create a dependency between them. Notice that, if any of the tasks executes, it will raise an assertion. In line 13, we cancel <code>t1</code>, which causes <code>t2</code> to be canceled as well. In line 16, we launch <code>t2</code>, but it does not matter as it will not execute because it was canceled when <code>t1</code> propagated its cancelation.</p>
<dl class="section user"><dt>Example 2: Canceling a task after launching it, but before it</dt><dd>executes. <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">auto</span> t1 = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    printf(<span class="stringliteral">&quot;Hello World from t1!\n&quot;</span>);</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  });</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">auto</span> t2 = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  });</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">auto</span> t3 = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  });</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// Create dependencies</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;t1 &gt;&gt; t2 &gt;&gt; t3;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// Launch t2. It can&#39;t execute yet because</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// t1 hasn&#39;t been launched.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(t2);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Cancel t2, which propagates cancelation to t3</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<a class="code" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel</a>(t2);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// Launch t1. It will execute because nobody</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// canceled it.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(t1);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// Returns after t1 completes execution</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(t1);</div>
</div><!-- fragment --></dd></dl>
<p>In the example above, we create and chain three tasks <code>t1</code>, <code>t2</code>, and <code>t3</code>. In line 18, we launch <code>t2</code>, but it cannot execute because its predecessor has not executed yet. In line 21, we cancel <code>t2</code>, which means that it will never execute. Because <code>t3</code> is <code>t2</code>'s successor, it is also canceled &ndash; if <code>t3</code> had a successor, it would also be canceled.</p>
<dl class="section user"><dt>Example 3: Canceling a task while it executes.</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<a class="code" href="group__tasks__doc.html#classmare_1_1task__ptr">mare::task_ptr</a> t = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;      <a class="code" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel</a>();</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;      printf(<span class="stringliteral">&quot;Waiting to be canceled.\n&quot;</span>);</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;      usleep(10);</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    }</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    assert(<span class="keyword">false</span>); <span class="comment">// This will never fire</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  }</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  );</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//Launch t</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(t);</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// Wait for 2 seconds.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;sleep(2);</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// Cancel task. Returns immediately.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<a class="code" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel</a>(t);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Wait for the task.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(t);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
</div><!-- fragment --></dd></dl>
<p>In the example above, task <code>t</code>'s will never finish unless it is canceled. <code>t</code> is launched in line 12. After launching the task, we block for 2 seconds in line 15 to ensure that <code>t</code> is scheduled and prints its messages. In line 18, we ask MARE to cancel the task, which should be running by now. <code><a class="el" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel()</a></code> returns immediately after it marks the task as "pending for cancelation". This means that <code>t</code> might still be executing after <code>mare::cancel(t)</code> returns. That is why we call <code>mare::wait_for(t)</code> in line 21, to ensure that we wait for <code>t</code> to complete its execution. Remember: a task does not know whether someone has requested its cancelation unless it calls <code><a class="el" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel()</a></code> during its execution.</p>
<dl class="section user"><dt>Example 4: Canceling a completed task.</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">auto</span> t1 = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    printf(<span class="stringliteral">&quot;Hello World from t1!\n&quot;</span>);</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  });</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">auto</span> t2 = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    <span class="keywordflow">while</span> (1){</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;      <a class="code" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel</a>();</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;      printf(<span class="stringliteral">&quot;Hello World from t1!\n&quot;</span>);</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;      usleep(100);</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    };</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  });</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// Create dependencies</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;t1 &gt;&gt; t2;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// Launch tasks</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(t1);</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(t2);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Wait for t1 to complete</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(t1);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// Cancel t1. Because it has already completed, it does not do</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// cancelation propagation.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<a class="code" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel</a>(t1);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// Will never return</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(t2);</div>
</div><!-- fragment --></dd></dl>
<p>In the example above, we launch <code>t1</code> and <code>t2</code> after we set up a dependency between them. On line 25, we cancel <code>t1</code> after it has completed. By then, <code>t1</code> has finished execution (we wait for it in line 21) so <code>cancel(t1)</code> has no effect. Thus, nobody cancels <code>t2</code> and <code>wait_for(t2)</code> in line 28 never returns.</p>
<dl class="section see"><dt>See Also</dt><dd>mare::after(task_ptr const &amp;, task_ptr const &amp;). </dd>
<dd>
<a class="el" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel()</a>. </dd>
<dd>
mare::wait_for(task_ptr const&amp;); </dd></dl>

<p>Definition at line <a class="el" href="task_8hh_source.html#l00214">214</a> of file <a class="el" href="task_8hh_source.html">task.hh</a>.</p>

</div>
</div>
<a class="anchor" id="ga9eec14bf458dfc6322910b6d428221ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mare::cancel </td>
          <td>(</td>
          <td class="paramtype">unsafe_task_ptr const &amp;&#160;</td>
          <td class="paramname"><em>task</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Cancel tasks</p>
<p>See mare::cancel(task_ptr const&amp; task).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Task to cancel.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="group__exceptions.html#classmare_1_1api__exception">api_exception</a></td><td>If task pointer is NULL. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="task_8hh_source.html#l00230">230</a> of file <a class="el" href="task_8hh_source.html">task.hh</a>.</p>

</div>
</div>
<a class="anchor" id="gad97de382780eb082e5341a23cf45dec9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mare::abort_on_cancel </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Aborts execution of calling task if any of its groups is canceled or if someone has canceled it by calling <a class="el" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel()</a>.</p>
<p>MARE uses cooperative multitasking. Therefore, it cannot abort an executing task without help from the task. In MARE, each executing task is responsible for periodically checking whether it should abort. Thus, tasks call <a class="el" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel()</a> to test whether they, or any of the groups to which they belong, have been canceled. If true, <a class="el" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel()</a> does not return. Instead, it thows <a class="el" href="group__exceptions.html#classmare_1_1abort__task__exception">mare::abort_task_exception</a>, which the MARE runtime catches. The runtime then transitions the task to a canceled state and propagates cancelation to the task's successors, if any.</p>
<p>Because <a class="el" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel()</a> never returns, we recommend that you use use RAII to allocate and deallocate the resources used inside a task. If using RAII in your code is not an option, surround <a class="el" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel()</a> with try &ndash; catch, and call throw from within the catch block after the cleanup code.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="group__exceptions.html#classmare_1_1abort__task__exception">abort_task_exception</a></td><td>If called from a task that has been canceled via <a class="el" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel()</a> or that belongs to a canceled group.</td></tr>
    <tr><td class="paramname"><a class="el" href="group__exceptions.html#classmare_1_1api__exception">api_exception</a></td><td>If called from outside a task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example 1</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifdef HAVE_CONFIG_H</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &lt;config.h&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;mare/mare.h&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using namespace </span>mare;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keywordtype">int</span> main() {</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  <span class="comment">// Initialize the MARE runtime.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  <a class="code" href="group__init__shutdown.html#gac85658f566f4b5b1f17b9d81fe14a508">mare::runtime::init</a>();</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  <span class="comment">// Create task</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  <span class="keyword">auto</span> t = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;      <span class="keywordtype">size_t</span> num_iters = 0;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;      <span class="keywordflow">while</span>(1)</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;      {</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        <span class="comment">// Check whether the task needs to stop execution.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        <span class="comment">// Without abort_on_cancel() the task would never</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        <span class="comment">// return</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        <a class="code" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel</a>();</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        MARE_ALOG(<span class="stringliteral">&quot;Task has executed %zu iterations!&quot;</span>, num_iters);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        usleep(100);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        num_iters++;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;      }</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    });</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="comment">// Create group g</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keyword">auto</span> g = <a class="code" href="group__groups__creation.html#ga164f9c8b577069b2d8b1634cde459b1e">mare::create_group</a>(<span class="stringliteral">&quot;example group&quot;</span>);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">// Launch t into g. We don&#39;t use t after launch(), so we can</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="comment">// use launch_and_reset</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="group__execution.html#ga40aa3b0fcca0613706a53324a87f2926">mare::launch_and_reset</a>(g, t);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">// Wait for the task to execute a few iterations</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  usleep(10000);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="comment">// Cancel group g, and wait for t to complete</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel</a>(g);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(g);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// Shutdown the MARE runtime.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="group__init__shutdown.html#ga9876b6a82a27555a8f3affe7f7aa8c4c">mare::runtime::shutdown</a>();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Output</dt><dd><div class="fragment"><div class="line">Task has executed 1 iterations!</div>
<div class="line">Task has executed 2 iterations!</div>
<div class="line">...</div>
<div class="line">Task has executed 47 iterations!</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Example 2</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<a class="code" href="group__tasks__doc.html#classmare_1_1task__ptr">mare::task_ptr</a> t = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;      <span class="keywordflow">try</span>{</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        <a class="code" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel</a>();</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;      }<span class="keywordflow">catch</span>(<a class="code" href="group__exceptions.html#classmare_1_1abort__task__exception">mare::abort_task_exception</a> <span class="keyword">const</span>&amp; e) {</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        <span class="comment">//..do cleanup</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        <span class="keywordflow">throw</span>;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;      }</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;      printf(<span class="stringliteral">&quot;Waiting to be canceled.\n&quot;</span>);</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;      usleep(10);</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    }</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    assert(<span class="keyword">false</span>); <span class="comment">// This will never fire</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  }</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  );</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//Launch t</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(t);</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// Wait for 2 seconds.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;sleep(2);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// Cancel task. Returns immediately.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<a class="code" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel</a>(t);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// Wait for the task to complete.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(t);</div>
</div><!-- fragment --> </dd></dl>

<p>Definition at line <a class="el" href="task_8hh_source.html#l00277">277</a> of file <a class="el" href="task_8hh_source.html">task.hh</a>.</p>

</div>
</div>
<a class="anchor" id="ga2ef5a64e289ff4f2339b846066d4a052"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mare::abort_task </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Aborts execution of calling task.</p>
<p>Use this method from within a running task to immediately abort that task and all its successors. Like <a class="el" href="group__tasks__cancelation.html#gad97de382780eb082e5341a23cf45dec9">mare::abort_on_cancel()</a>, <a class="el" href="group__tasks__cancelation.html#ga2ef5a64e289ff4f2339b846066d4a052">mare::abort_task()</a> never returns. Instead, it throws <a class="el" href="group__exceptions.html#classmare_1_1abort__task__exception">mare::abort_task_exception</a>, which the MARE runtime catches. The runtime then transitions the task to a canceled state and propagates propagation to the task's successors, if any.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="group__exceptions.html#classmare_1_1abort__task__exception">abort_task_exception</a></td><td>If called from a task has been canceled via <a class="el" href="group__groups__cancel.html#ga432f04a0f64afdd64f3b83000bddc042">mare::cancel()</a> or a task that belongs to a canceled group.</td></tr>
    <tr><td class="paramname"><a class="el" href="group__exceptions.html#classmare_1_1api__exception">api_exception</a></td><td>If called from outside a task. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">auto</span> t1 = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([]{</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    <span class="keywordflow">while</span>(<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;      printf(<span class="stringliteral">&quot;Hello World %d\n&quot;</span>, i);</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;      sleep(1);</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;      i++;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;      <span class="keywordflow">if</span>(i == 10)</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        <a class="code" href="group__tasks__cancelation.html#ga2ef5a64e289ff4f2339b846066d4a052">mare::abort_task</a>();</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    }</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="comment">// This will never fire</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  });</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">auto</span> t2 = <a class="code" href="group__tasks__creation.html#ga4d2a57c19a9199c7ccee7a01ff688da8">mare::create_task</a>([] {</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="comment">// This will never fire</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  });</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;t1 &gt;&gt; t2;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//Launch tasks</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(t1);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<a class="code" href="group__sdf__doc.html#gaf6d88ec9965da7eaa9da60ab7c27041b">mare::launch</a>(t2);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// Wait for t1 to complete.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(t1);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// Returns immediately, t2 is canceled.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<a class="code" href="group__groups__waiting.html#gaa2a0ab6d7f24ae0840b581bfa8e94fea">mare::wait_for</a>(t2);</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Output</dt><dd><div class="fragment"><div class="line">Hello World !</div>
<div class="line">Hello World!</div>
<div class="line">...</div>
<div class="line">Hello World!</div>
</div><!-- fragment --> </dd></dl>

<p>Definition at line <a class="el" href="task_8hh_source.html#l00309">309</a> of file <a class="el" href="task_8hh_source.html">task.hh</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  Copyright (c) 2012-2013 Qualcomm Technologies, Inc. All rights reserved. 
  Confidential and Proprietary - Qualcomm Technologies, Inc.
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 footer.html - footer file used to customize the footers on each HTML page for the API 
               Interface Specification documents.
 Updated:  11/05/13 LB Removed confidential, distribution, and export statement.
 Updated:  09/20/13 LB Updated to support mare project's User Guide and API doc.
 Updated:  04/18/13 LB Added Documentation and Interface Specification in place of hard-coding doc dcn. Deleted original
                       use of Documentation and Interface Specification to display text in the left portion of the footer.
 Updated:  03/08/13 LB Updated to support Doxygen 1.8.3.1
 Updated:  01/18/13 LB Replaced qualcomm_logo.gif to QTI_Logo.png
 Updated:  10/25/12 LB Added company name changes.
 New file: 10/15/12 LB Created to support the Rev E Alpha Doxygen-to-HTML-PDF process. -->
<!-- start footer part -->
<!-- 7/12/12 JG added div class defined in css to include warning statement on all pages -->
<!--[if lte IE 8]><div class="warningmsgie8"><![endif]-->
<!--[if(gte IE 9)|!(IE)]><!--><div class="warningmsg"><!--<![endif]-->
</div>
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
		<p align="right">HT80-NG608-1 E<br />
        <img class="footer"  alt="QTI Logo" src="qti_logo_HTML.png" />
		</p>
		</li>
  </ul>
</div>
</body>
</html>
